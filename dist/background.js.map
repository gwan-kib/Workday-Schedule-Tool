{"version":3,"file":"background.js","sources":["../src/utilities/debugTool.js","../src/background.js"],"sourcesContent":["const logConfiguration = {\r\n  global: false, // master switch (all logs everywhere)\r\n  local: {}, // per-scope switch: { \"schedule\": true/false, ... }\r\n  log: {}, // per-log switch: { \"schedule.render\": true/false, ... }\r\n};\r\n\r\n// this function updates the logging configuration state:\r\n// debugLog({ global: false })                    -> turns ALL logs off (global control)\r\n// debugLog({ local: { schedule: true } })        -> turns logs ON for the \"schedule\" module (local control)\r\n// debugLog({ log: { \"schedule.render\": false }}) -> disables logging for the \"schedule.render\" function (specific log control)\r\nexport const debugLog = ({ global, local, log } = {}) => {\r\n  if (typeof global === \"boolean\") logConfiguration.global = global;\r\n\r\n  if (local && typeof local === \"object\") {\r\n    for (const [k, v] of Object.entries(local)) {\r\n      if (typeof v === \"boolean\") logConfiguration.local[k] = v;\r\n    }\r\n  }\r\n\r\n  if (log && typeof log === \"object\") {\r\n    for (const [k, v] of Object.entries(log)) {\r\n      if (typeof v === \"boolean\") logConfiguration.log[k] = v;\r\n    }\r\n  }\r\n};\r\n\r\n// quick read of current config settings (for debugging this file)\r\nexport const getLogConfiguration = () => ({\r\n  global: logConfiguration.global,\r\n  local: { ...logConfiguration.local },\r\n  log: { ...logConfiguration.log },\r\n});\r\n\r\n// logic to decide if a log should print\r\nconst loggingIsOn = (scope, id) => {\r\n  if (!logConfiguration.global) return false; // If global logging is off, return immediately\r\n\r\n  if (scope && logConfiguration.local[scope] === false) return false; // Local control check\r\n  if (id && logConfiguration.log[id] === false) return false; // Specific log control\r\n\r\n  return true; // Default: logs are ON\r\n};\r\n\r\n// main logger factory for a given scope (file/module), eg. const D = debugFor(\"schedule\");\r\nexport const debugFor = (scope) => {\r\n  const prefix = scope ? `[Workday - Schedule Tool (file: ${scope})]\\n` : \"[Workday - Schedule Tool]\\n\"; // prefix at the start of all logs\r\n\r\n  // .log can either be the message (string), .log(\"message\"), or a meta object, .log({ id: \"schedule.render\" }, \"message\"),\r\n  // or both, .log({ id: \"schedule.render\", on: false }, \"message\")\r\n  // ...rest means it can also take in any additional arguments (an object, an array, etc.)\r\n  const log = (metaOrMsg, ...rest) => {\r\n    let meta = null;\r\n    let args = null;\r\n\r\n    if (metaOrMsg && typeof metaOrMsg === \"object\" && !Array.isArray(metaOrMsg)) {\r\n      meta = metaOrMsg;\r\n      args = rest;\r\n    } else {\r\n      meta = null;\r\n      args = [metaOrMsg, ...rest];\r\n    }\r\n\r\n    const id = meta?.id;\r\n    const forceOn = meta?.on === true; // if forceOn is true, this forces the log to show regardless of global/local/log settings.\r\n    const forceOff = meta?.on === false; // if forceOff is true, immediately return (log is disabled for this specific call).\r\n\r\n    if (forceOff) return;\r\n    if (!forceOn && !loggingIsOn(scope, id)) return;\r\n\r\n    console.log(prefix, ...args);\r\n  };\r\n\r\n  // same as log but for warnings\r\n  const warning = (metaOrMsg, ...rest) => {\r\n    let meta = null;\r\n    let args = null;\r\n\r\n    if (metaOrMsg && typeof metaOrMsg === \"object\" && !Array.isArray(metaOrMsg)) {\r\n      meta = metaOrMsg;\r\n      args = rest;\r\n    } else {\r\n      args = [metaOrMsg, ...rest];\r\n    }\r\n\r\n    const id = meta?.id;\r\n    const forceOn = meta?.on === true;\r\n    const forceOff = meta?.on === false;\r\n\r\n    if (forceOff) return;\r\n    if (!forceOn && !loggingIsOn(scope, id)) return;\r\n\r\n    console.log(\"âš ï¸\", prefix, ...args);\r\n  };\r\n\r\n  // same as log but for errors\r\n  const error = (metaOrMsg, ...rest) => {\r\n    let meta = null;\r\n    let args = null;\r\n\r\n    if (metaOrMsg && typeof metaOrMsg === \"object\" && !Array.isArray(metaOrMsg)) {\r\n      meta = metaOrMsg;\r\n      args = rest;\r\n    } else {\r\n      args = [metaOrMsg, ...rest];\r\n    }\r\n\r\n    const id = meta?.id;\r\n    const forceOn = meta?.on === true;\r\n    const forceOff = meta?.on === false;\r\n\r\n    if (forceOff) return;\r\n    if (!forceOn && !loggingIsOn(scope, id)) return;\r\n\r\n    console.log(\"ðŸš©\", prefix, ...args);\r\n  };\r\n\r\n  // Convenience toggles for this scope (still goes through debugLog under the hood)\r\n  const on = () => debugLog({ local: { [scope]: true } });\r\n  const off = () => debugLog({ local: { [scope]: false } });\r\n\r\n  return { log, warn: warning, error, on, off };\r\n};\r\n","import { debugFor } from \"./utilities/debugTool.js\"; \r\n\r\nconst debug = debugFor(\"background\"); \r\n\r\nchrome.action.onClicked.addListener((tab) => {\r\n  if (!tab?.id) return;\r\n\r\n  debug.log(\"Action button clicked, sending message to tab:\", { tabId: tab.id }); \r\n\r\n  chrome.tabs.sendMessage(tab.id, { type: \"TOGGLE_WIDGET\" }, () => {\r\n    if (chrome.runtime.lastError) {\r\n      debug.error(\"Error sending message to tab:\", chrome.runtime.lastError);\r\n    } else {\r\n      debug.log(\"Message successfully sent to toggle widget.\"); \r\n    }\r\n  });\r\n});\r\n"],"names":["logConfiguration","debugLog","global","local","log","k","v","loggingIsOn","scope","id","debugFor","prefix","metaOrMsg","rest","meta","args","forceOn","debug","tab"],"mappings":"AAAA,MAAMA,EAAmB,CACvB,OAAQ,GACR,MAAO,CAAA,EACP,IAAK,CAAA,CACP,EAMaC,EAAW,CAAC,CAAE,OAAAC,EAAQ,MAAAC,EAAO,IAAAC,CAAG,EAAK,CAAA,IAAO,CAGvD,GAFI,OAAOF,GAAW,YAAWF,EAAiB,OAASE,GAEvDC,GAAS,OAAOA,GAAU,SAC5B,SAAW,CAACE,EAAGC,CAAC,IAAK,OAAO,QAAQH,CAAK,EACnC,OAAOG,GAAM,YAAWN,EAAiB,MAAMK,CAAC,EAAIC,GAI5D,GAAIF,GAAO,OAAOA,GAAQ,SACxB,SAAW,CAACC,EAAGC,CAAC,IAAK,OAAO,QAAQF,CAAG,EACjC,OAAOE,GAAM,YAAWN,EAAiB,IAAIK,CAAC,EAAIC,EAG5D,EAUMC,EAAc,CAACC,EAAOC,IACtB,GAACT,EAAiB,QAETA,EAAiB,MAAMQ,CAAK,IAAM,IAC3CC,GAAMT,EAAiB,IAAIS,CAAE,IAAM,IAM5BC,EAAYF,GAAU,CACjC,MAAMG,EAAiB,mCAAmCH,CAAK;AAAA,EA2E/D,MAAO,CAAE,IAtEG,CAACI,KAAcC,IAAS,CAClC,IAAIC,EAAO,KACPC,EAAO,KAEPH,GAAa,OAAOA,GAAc,UAAY,CAAC,MAAM,QAAQA,CAAS,GACxEE,EAAOF,EACPG,EAAOF,IAEPC,EAAO,KACPC,EAAO,CAACH,EAAW,GAAGC,CAAI,GAG5B,MAAMJ,EAAKK,GAAM,GACXE,EAAUF,GAAM,KAAO,GACZA,GAAM,KAAO,KAG1B,CAACE,GAAW,CAACT,EAAYC,EAAOC,CAAE,GAEtC,QAAQ,IAAIE,EAAQ,GAAGI,CAAI,EAC7B,EAkDc,KA/CE,CAACH,KAAcC,IAAS,CACtC,IAAIC,EAAO,KACPC,EAAO,KAEPH,GAAa,OAAOA,GAAc,UAAY,CAAC,MAAM,QAAQA,CAAS,GACxEE,EAAOF,EACPG,EAAOF,GAEPE,EAAO,CAACH,EAAW,GAAGC,CAAI,EAG5B,MAAMJ,EAAKK,GAAM,GACXE,EAAUF,GAAM,KAAO,GACZA,GAAM,KAAO,KAG1B,CAACE,GAAW,CAACT,EAAYC,EAAOC,CAAE,GAEtC,QAAQ,IAAI,KAAME,EAAQ,GAAGI,CAAI,EACnC,EA4B6B,MAzBf,CAACH,KAAcC,IAAS,CACpC,IAAIC,EAAO,KACPC,EAAO,KAEPH,GAAa,OAAOA,GAAc,UAAY,CAAC,MAAM,QAAQA,CAAS,GACxEE,EAAOF,EACPG,EAAOF,GAEPE,EAAO,CAACH,EAAW,GAAGC,CAAI,EAG5B,MAAMJ,EAAKK,GAAM,GACXE,EAAUF,GAAM,KAAO,GACZA,GAAM,KAAO,KAG1B,CAACE,GAAW,CAACT,EAAYC,EAAOC,CAAE,GAEtC,QAAQ,IAAI,KAAME,EAAQ,GAAGI,CAAI,EACnC,EAMoC,GAHzB,IAAMd,EAAS,CAAE,MAAO,CAAE,CAACO,CAAK,EAAG,EAAI,CAAE,CAAE,EAGd,IAF5B,IAAMP,EAAS,CAAE,MAAO,CAAE,CAACO,CAAK,EAAG,EAAK,CAAE,CAAE,EAG1D,ECvHMS,EAAQP,EAAS,YAAY,EAEnC,OAAO,OAAO,UAAU,YAAaQ,GAAQ,CACtCA,GAAK,KAEVD,EAAM,IAAI,iDAAkD,CAAE,MAAOC,EAAI,EAAE,CAAE,EAE7E,OAAO,KAAK,YAAYA,EAAI,GAAI,CAAE,KAAM,eAAe,EAAI,IAAM,CAC3D,OAAO,QAAQ,UACjBD,EAAM,MAAM,gCAAiC,OAAO,QAAQ,SAAS,EAErEA,EAAM,IAAI,6CAA6C,CAE3D,CAAC,EACH,CAAC"}